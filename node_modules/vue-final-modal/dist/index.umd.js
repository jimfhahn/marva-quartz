(function(M,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue"),require("@vueuse/core"),require("@vueuse/integrations/useFocusTrap")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","@vueuse/integrations/useFocusTrap"],n):(M=typeof globalThis<"u"?globalThis:M||self,n(M.index={},M.Vue,M.VueUse,M.VueUseFocusTrap))})(this,function(M,n,k,fe){"use strict";const A={modalId:{type:[String,Number,Symbol],default:void 0},modelValue:{type:Boolean,default:void 0},displayDirective:{type:String,default:"if",validator:e=>["if","show"].includes(e)},hideOverlay:{type:Boolean,default:void 0},overlayTransition:{type:[String,Object],default:void 0},contentTransition:{type:[String,Object],default:void 0},overlayClass:{type:void 0,default:void 0},contentClass:{type:void 0,default:void 0},overlayStyle:{type:[String,Object,Array],default:void 0},contentStyle:{type:[String,Object,Array],default:void 0},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!0},background:{type:String,default:"non-interactive",validator:e=>["interactive","non-interactive"].includes(e)},focusTrap:{type:[Boolean,Object],default:()=>({allowOutsideClick:!0})},lockScroll:{type:Boolean,default:!0},zIndexFn:{type:Function,default:({index:e})=>1e3+2*e},swipeToClose:{type:String,default:"none",validator:e=>["none","up","right","down","left"].includes(e)},threshold:{type:Number,default:0},showSwipeBanner:{type:Boolean,default:void 0},preventNavigationGestures:{type:Boolean,default:void 0}};function Z(e=!1){const o=n.ref(e),t=n.ref(o.value?0:void 0);return[o,t,{beforeEnter(){t.value=1},afterEnter(){t.value=0},beforeLeave(){t.value=3},afterLeave(){t.value=2}}]}function pe(e,o){const{modelValueLocal:t,onEntering:l,onEnter:d,onLeaving:s,onLeave:r}=o,i=n.ref(t.value),[c,u,f]=Z(i.value),[h,p,m]=Z(i.value),C=n.computed(()=>typeof e.contentTransition=="string"?{name:e.contentTransition}:{...e.contentTransition}),B=n.computed(()=>typeof e.overlayTransition=="string"?{name:e.overlayTransition}:{...e.overlayTransition}),V=n.computed(()=>(e.hideOverlay||p.value===2)&&u.value===2);n.watch(V,O=>{O&&(i.value=!1)}),n.watch(u,O=>{switch(O){case 1:return l();case 0:return d();case 3:return s();case 2:return r()}});async function y(){i.value=!0,await n.nextTick(),c.value=!0,h.value=!0}function E(){c.value=!1,h.value=!1}return{visible:i,contentVisible:c,contentListeners:f,contentTransition:C,overlayVisible:h,overlayListeners:m,overlayTransition:B,enterTransition:y,leaveTransition:E}}function me(e,o,t){const{vfmRootEl:l,visible:d,modelValueLocal:s}=t,r=n.ref();function i(){d.value&&e.escToClose&&(s.value=!1)}function c(f){r.value=f==null?void 0:f.target}function u(){r.value===l.value&&(e.clickToClose?s.value=!1:o("clickOutside"))}return{onEsc:i,onMouseupRoot:u,onMousedown:c}}function ve(e,o){const t=n.ref(!!e.modelValue);return n.watch(()=>e.modelValue,l=>{t.value=!!l}),n.watch(t,l=>{l!==e.modelValue&&o("update:modelValue",l)}),{modelValueLocal:t}}function he(e,o){if(e.focusTrap===!1)return{focus(){},focusLast(){},blur(){}};const{focusEl:t,openedModals:l}=o,{hasFocus:d,activate:s,deactivate:r}=fe.useFocusTrap(t,e.focusTrap);function i(){requestAnimationFrame(()=>{s()})}function c(){l.length<=0||n.nextTick(()=>{const f=l[l.length-1];f==null||f.value.focus()})}function u(){d.value&&r()}return{focus:i,focusLast:c,blur:u}}let G=!1;if(typeof window<"u"){const e={get passive(){G=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}const K=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let P=[],j=!1,H=0,_=-1,N,R;const ye=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const o=window.getComputedStyle(e);return["auto","scroll"].includes(o.overflowY)&&e.scrollHeight>e.clientHeight},we=(e,o)=>!(e.scrollTop===0&&o<0||e.scrollTop+e.clientHeight+o>=e.scrollHeight&&o>0),be=e=>{const o=[];for(;e;){if(o.push(e),e.classList.contains("vfm"))return o;e=e.parentElement}return o},Te=(e,o)=>{let t=!1;return be(e).forEach(d=>{ye(d)&&we(d,o)&&(t=!0)}),t},J=e=>P.some(()=>Te(e,-H)),z=e=>{const o=e||window.event;return J(o.target)||o.touches.length>1?!0:(o.preventDefault&&o.preventDefault(),!1)},Se=e=>{if(R===void 0){const o=!!e&&e.reserveScrollBarGap===!0,t=window.innerWidth-document.documentElement.clientWidth;if(o&&t>0){const l=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);R=document.body.style.paddingRight,document.body.style.paddingRight=`${l+t}px`}}N===void 0&&(N=document.body.style.overflow,document.body.style.overflow="hidden")},Me=()=>{R!==void 0&&(document.body.style.paddingRight=R,R=void 0),N!==void 0&&(document.body.style.overflow=N,N=void 0)},ge=e=>e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1,Ce=(e,o)=>(H=e.targetTouches[0].clientY-_,J(e.target)?!1:o&&o.scrollTop===0&&H>0||ge(o)&&H<0?z(e):(e.stopPropagation(),!0)),Ee=(e,o)=>{if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(P.some(l=>l.targetElement===e))return;const t={targetElement:e,options:o||{}};P=[...P,t],K?(e.ontouchstart=l=>{l.targetTouches.length===1&&(_=l.targetTouches[0].clientY)},e.ontouchmove=l=>{l.targetTouches.length===1&&Ce(l,e)},j||(document.addEventListener("touchmove",z,G?{passive:!1}:void 0),j=!0)):Se(o)},ke=e=>{if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}P=P.filter(o=>o.targetElement!==e),K?(e.ontouchstart=null,e.ontouchmove=null,j&&P.length===0&&(document.removeEventListener("touchmove",z,G?{passive:!1}:void 0),j=!1)):P.length||Me()};function Be(e,o){const{lockScrollEl:t}=o;n.watch(()=>e.lockScroll,s=>{s?d():l()}),n.onBeforeUnmount(()=>{l()});function l(){t.value&&ke(t.value)}function d(){e.lockScroll&&t.value&&Ee(t.value,{reserveScrollBarGap:!0,allowTouchMove:s=>{for(;s&&s!==document.body;){if(s.getAttribute("vfm-scroll-lock-ignore")!==null)return!0;s=s.parentElement}return!1}})}return{enableBodyScroll:l,disableBodyScroll:d}}function Ve(e){function o(t){switch(t){case"beforeOpen":e(t);break;case"beforeClose":e(t);break;case"opened":e(t);break;case"closed":e(t);break}}return{emitEvent:o}}function Oe(e,o){const{openedModals:t}=o,l=n.ref();function d(){var s;l.value=(s=e.zIndexFn)==null?void 0:s.call(e,{index:t.length})}return{zIndex:l,refreshZIndex:d}}const Le=e=>(...o)=>{e&&(e==null||e(...o),e=null)},I=()=>{};function U(e,o,t){return e>t?t:e<o?o:e}const Q=e=>{if(e instanceof TouchEvent){const{clientX:o,clientY:t}=e.targetTouches[0];return{x:o,y:t}}else{const{clientX:o,clientY:t}=e;return{x:o,y:t}}};function Pe(e){if(!e)return!1;let o=!1;const t={get passive(){return o=!0,!1}};return e.addEventListener("x",I,t),e.removeEventListener("x",I),o}function Ie(e,{threshold:o=0,onSwipeStart:t,onSwipe:l,onSwipeEnd:d,passive:s=!0}){const r=n.reactive({x:0,y:0}),i=n.reactive({x:0,y:0}),c=n.computed(()=>r.x-i.x),u=n.computed(()=>r.y-i.y),{max:f,abs:h}=Math,p=n.computed(()=>f(h(c.value),h(u.value))>=o),m=n.ref(!1),C=n.computed(()=>p.value?h(c.value)>h(u.value)?c.value>0?"left":"right":u.value>0?"up":"down":"none"),B=(v,b)=>{r.x=v,r.y=b},V=(v,b)=>{i.x=v,i.y=b};let y,E;function O(v){y.capture&&!y.passive&&v.preventDefault();const{x:b,y:x}=Q(v);B(b,x),V(b,x),t==null||t(v),E=[k.useEventListener(e,"mousemove",D,y),k.useEventListener(e,"touchmove",D,y),k.useEventListener(e,"mouseup",a,y),k.useEventListener(e,"touchend",a,y),k.useEventListener(e,"touchcancel",a,y)]}function D(v){const{x:b,y:x}=Q(v);V(b,x),!m.value&&p.value&&(m.value=!0),m.value&&(l==null||l(v))}function a(v){m.value&&(d==null||d(v,C.value)),m.value=!1,E.forEach(b=>b())}let w=[];return n.onMounted(()=>{const v=Pe(window==null?void 0:window.document);s?y=v?{passive:!0}:{capture:!1}:y=v?{passive:!1,capture:!0}:{capture:!0},w=[k.useEventListener(e,"mousedown",O,y),k.useEventListener(e,"touchstart",O,y)]}),{isSwiping:m,direction:C,coordsStart:r,coordsEnd:i,lengthX:c,lengthY:u,stop:()=>{w.forEach(v=>v()),E.forEach(v=>v())}}}function De(e,o){const{modelValueLocal:t}=o,l=.1,d=300,s=n.ref(),r=n.ref(),i=n.computed(()=>e.showSwipeBanner?r.value:s.value),c=n.ref(0),u=n.ref(!0);let f=I,h=!0,p,m=!1;const{lengthX:C,lengthY:B,direction:V,isSwiping:y}=Ie(i,{threshold:e.threshold,onSwipeStart(a){f=k.useEventListener(document,"selectionchange",()=>{var w;u.value=(w=window.getSelection())==null?void 0:w.isCollapsed}),p=new Date().getTime(),m=E(a==null?void 0:a.target)},onSwipe(){var a,w,L,v;if(m&&u.value&&V.value===e.swipeToClose){if(V.value==="up"){const b=U(Math.abs(B.value||0),0,((a=i.value)==null?void 0:a.offsetHeight)||0)-(e.threshold||0);c.value=b}else if(V.value==="down"){const b=U(Math.abs(B.value||0),0,((w=i.value)==null?void 0:w.offsetHeight)||0)-(e.threshold||0);c.value=-b}else if(V.value==="right"){const b=U(Math.abs(C.value||0),0,((L=i.value)==null?void 0:L.offsetWidth)||0)-(e.threshold||0);c.value=-b}else if(V.value==="left"){const b=U(Math.abs(C.value||0),0,((v=i.value)==null?void 0:v.offsetWidth)||0)-(e.threshold||0);c.value=b}}},onSwipeEnd(a,w){if(f(),!u.value){u.value=!0;return}const L=new Date().getTime(),v=w===e.swipeToClose,b=(()=>{var Y,$;if(w==="up"||w==="down")return Math.abs((B==null?void 0:B.value)||0)>l*(((Y=i.value)==null?void 0:Y.offsetHeight)||0);if(w==="left"||w==="right")return Math.abs((C==null?void 0:C.value)||0)>l*((($=i.value)==null?void 0:$.offsetWidth)||0)})(),x=L-p<=d;if(h&&m&&v&&(b||x)){c.value=0,t.value=!1;return}c.value=0}});n.watch(()=>u.value,a=>{a||(c.value=0)}),n.watch(()=>c.value,(a,w)=>{switch(e.swipeToClose){case"down":case"right":h=a<w;break;case"up":case"left":h=a>w;break}});function E(a){const w=a==null?void 0:a.tagName;if(!w||["INPUT","TEXTAREA"].includes(w))return!1;const L=(()=>{switch(e.swipeToClose){case"up":return(a==null?void 0:a.scrollTop)+(a==null?void 0:a.clientHeight)===(a==null?void 0:a.scrollHeight);case"left":return(a==null?void 0:a.scrollLeft)+(a==null?void 0:a.clientWidth)===(a==null?void 0:a.scrollWidth);case"down":return(a==null?void 0:a.scrollTop)===0;case"right":return(a==null?void 0:a.scrollLeft)===0;default:return!1}})();return a===i.value?L:L&&E(a==null?void 0:a.parentElement)}n.watch(()=>t.value,a=>{a&&(c.value=0)});const O=n.computed(()=>{if(e.swipeToClose==="none")return;const a=(()=>{switch(e.swipeToClose){case"up":case"down":return"translateY";case"left":case"right":return"translateX"}})();return{class:{"vfm-bounce-back":!y.value},style:y.value?{transform:`${a}(${-c.value}px)`}:""}});function D(a){e.preventNavigationGestures&&a.preventDefault()}return{vfmContentEl:s,swipeBannerEl:r,bindSwipe:O,onTouchStartSwipeBanner:D}}const W=Symbol("vfm"),X=Symbol("internalVfm"),ee=n.defineComponent({__name:"CoreModal",props:A,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{emit:o}){const t=e,{modals:l,openedModals:d}=n.inject(W,{modals:[],openedModals:[]}),{moveToLastOpenedModals:s,openLastOverlay:r,deleteFromOpenedModals:i,deleteFromModals:c}=n.inject(X,{moveToLastOpenedModals:I,openLastOverlay:I,deleteFromOpenedModals:I,deleteFromModals:I}),u=n.ref(),{zIndex:f,refreshZIndex:h}=Oe(t,{openedModals:d}),{focus:p,focusLast:m,blur:C}=he(t,{focusEl:u,openedModals:d}),{enableBodyScroll:B,disableBodyScroll:V}=Be(t,{lockScrollEl:u}),{modelValueLocal:y}=ve(t,o),{emitEvent:E}=Ve(o);let O=I;const{visible:D,contentVisible:a,contentListeners:w,contentTransition:L,overlayVisible:v,overlayListeners:b,overlayTransition:x,enterTransition:Y,leaveTransition:$}=pe(t,{modelValueLocal:y,async onEntering(){p(),await n.nextTick(),V()},onEnter(){E("opened"),O("opened")},onLeaving(){C()},onLeave(){E("closed"),O("closed")}}),{onEsc:ae,onMouseupRoot:Ge,onMousedown:ie}=me(t,o,{vfmRootEl:u,visible:D,modelValueLocal:y}),{vfmContentEl:We,swipeBannerEl:Xe,bindSwipe:qe,onTouchStartSwipeBanner:ce}=De(t,{modelValueLocal:y}),de=n.toRef(t,"hideOverlay"),F=n.computed(()=>({modalId:t.modalId,hideOverlay:de,overlayVisible:v,focus:p,toggle(T){return new Promise(S=>{O=Le(Ke=>S(Ke));const g=typeof T=="boolean"?T:!y.value;y.value=g,o("update:modelValue",g)})}}));n.onMounted(()=>{l.push(F)}),y.value&&ue(),n.watch(y,T=>{T?ue():Ze()});async function ue(){E("beforeOpen"),h(),s(F),r(),Y()}function Ze(){E("beforeClose"),B(),i(F),m(),r(),$()}return n.onBeforeUnmount(()=>{B(),c(F),i(F),m(),r()}),(T,S)=>T.displayDirective!=="if"||n.unref(D)?n.withDirectives((n.openBlock(),n.createElementBlock("div",{key:0,ref_key:"vfmRootEl",ref:u,class:n.normalizeClass(["vfm vfm--fixed vfm--inset",{"vfm--prevent-none":T.background==="interactive"}]),style:n.normalizeStyle({zIndex:n.unref(f)}),role:"dialog","aria-modal":"true",onKeydown:S[7]||(S[7]=n.withKeys((...g)=>n.unref(ae)&&n.unref(ae)(...g),["esc"])),onMouseup:S[8]||(S[8]=n.withModifiers(()=>n.unref(Ge)(),["self"])),onMousedown:S[9]||(S[9]=n.withModifiers(g=>n.unref(ie)(g),["self"]))},[n.unref(de)?n.createCommentVNode("",!0):(n.openBlock(),n.createBlock(n.Transition,n.mergeProps({key:0},n.unref(x),{appear:""},n.toHandlers(n.unref(b))),{default:n.withCtx(()=>[n.unref(v)?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(["vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none",T.overlayClass]),style:n.normalizeStyle([{"z-index":"-1"},T.overlayStyle]),"aria-hidden":"true"},null,6)):n.createCommentVNode("",!0)]),_:1},16)),n.createVNode(n.Transition,n.mergeProps(n.unref(L),{appear:""},n.toHandlers(n.unref(w))),{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",n.mergeProps({ref_key:"vfmContentEl",ref:We,class:["vfm__content vfm--outline-none",[T.contentClass,{"vfm--prevent-auto":T.background==="interactive"}]],style:T.contentStyle,tabindex:"0"},n.unref(qe),{onMousedown:S[6]||(S[6]=()=>n.unref(ie)())}),[n.renderSlot(T.$slots,"default"),T.showSwipeBanner?(n.openBlock(),n.createElementBlock("div",{key:0,ref_key:"swipeBannerEl",ref:Xe,class:"vfm-swipe-banner-container",onTouchstart:S[2]||(S[2]=g=>n.unref(ce)(g))},[n.renderSlot(T.$slots,"swipe-banner",{},()=>[n.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:S[0]||(S[0]=g=>T.swipeToClose==="left"&&g.preventDefault())},null,32),n.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:S[1]||(S[1]=g=>T.swipeToClose==="right"&&g.preventDefault())},null,32)])],544)):!T.showSwipeBanner&&T.preventNavigationGestures?(n.openBlock(),n.createElementBlock("div",{key:1,class:"vfm-swipe-banner-container",onTouchstart:S[5]||(S[5]=g=>n.unref(ce)(g))},[n.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:S[3]||(S[3]=g=>T.swipeToClose==="left"&&g.preventDefault())},null,32),n.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:S[4]||(S[4]=g=>T.swipeToClose==="right"&&g.preventDefault())},null,32)],32)):n.createCommentVNode("",!0)],16),[[n.vShow,n.unref(a)]])]),_:3},16)],38)),[[n.vShow,T.displayDirective!=="show"||n.unref(D)]]):n.createCommentVNode("",!0)}}),_e="",ne={...A,teleportTo:{type:[String,null,Boolean,Object],default:"body"}},xe=n.defineComponent({inheritAttrs:!1}),oe=n.defineComponent({...xe,__name:"VueFinalModal",props:ne,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{emit:o}){const l=re({props:e,modalProps:A,emit:o});return(d,s)=>(n.openBlock(),n.createBlock(n.Teleport,{to:d.teleportTo?d.teleportTo:void 0,disabled:!d.teleportTo},[n.createVNode(ee,n.normalizeProps(n.guardReactiveProps(n.unref(l))),{default:n.withCtx(()=>[n.renderSlot(d.$slots,"default")]),_:3},16)],8,["to","disabled"]))}});function q(){return n.inject(W)}function Ne(){return n.inject(X)}function te(e,o=oe){const{component:t,slots:l,...d}=e,s=typeof l>"u"?{}:Object.fromEntries(Object.entries(l).map(([r,i])=>k.isString(i)?[r,i]:"component"in i?[r,{...i,component:n.markRaw(i.component)}]:[r,n.markRaw(i)]));return{...d,component:n.markRaw(t||o),slots:s}}function Re(e){var i;const o=n.reactive({id:Symbol("useModal"),modelValue:!!(e!=null&&e.defaultModelValue),resolveOpened:()=>{},resolveClosed:()=>{},attrs:{},...te(e)});o.context||(n.getCurrentInstance()?o.context=q():console.warn("[Vue Final Modal warn] useModal() can only be used inside setup() or functional components."));function t(){return o.modelValue?Promise.resolve("[Vue Final Modal] modal is already opened"):(o.modelValue=!0,new Promise(c=>{o.resolveOpened=()=>c("opened")}))}function l(){return o.modelValue?(o.modelValue=!1,new Promise(c=>{o.resolveClosed=()=>c("closed")})):Promise.resolve("[Vue Final Modal] modal is already closed")}function d(c){const{slots:u,...f}=te(c,o.component);le(o,f),u&&Object.entries(u).forEach(([h,p])=>{const m=o.slots[h];k.isString(m)?o.slots[h]=p:se(m)&&se(p)?le(m,p):o.slots[h]=p})}function s(){if(!o.context)return;const c=o.context.dynamicModals.indexOf(o);c!==-1&&o.context.dynamicModals.splice(c,1)}const r={options:o,open:t,close:l,patchOptions:d,destroy:s};return(i=r.options.context)==null||i.dynamicModals.push(r.options),k.tryOnUnmounted(()=>r.destroy()),r}function Fe(e){return e}function Ae(e,o){return Object.entries(o).forEach(([t,l])=>{e[t]=l}),e}function le(e,o){o.component&&(e.component=o.component),o.attrs&&Ae(e.attrs,o.attrs)}function se(e){return"component"in e||"attrs"in e}function je(e,o){return Object.keys(o).reduce((t,l)=>(t[l]=e[l],t),{})}function He(e){return e?{"onUpdate:modelValue":o=>e("update:modelValue",o),onBeforeClose:()=>e("beforeClose"),onClosed:()=>e("closed"),onBeforeOpen:()=>e("beforeOpen"),onOpened:()=>e("opened"),onClickOutside:()=>e("clickOutside")}:{}}function re(e){const{props:o,modalProps:t,emit:l}=e,d=n.computed(()=>je(o,t)),s=He(l),r=n.useAttrs();return n.computed(()=>({...d.value,...s,...r}))}const ze=["innerHTML"],Ue=n.defineComponent({__name:"ModalsContainer",setup(e){const o=q(),t=Ne(),l=Symbol("ModalsContainer"),d=n.computed(()=>{var c;return l===((c=o.modalsContainers.value)==null?void 0:c[0])}),s=n.shallowRef([]);function r(){s.value=o.dynamicModals.filter(c=>c.modelValue)}function i(c){c==null||c(),r()}return n.watch(()=>{var c;return(c=o.dynamicModals)==null?void 0:c.map(u=>u.modelValue)},(c,u)=>{if(!u||c.length!==u.length){r();return}let f=c.length,h=!1;for(;!h&&f--;)c[f]===!0&&u[f]===!1&&(h=!0);h&&r()},{immediate:!0}),o.modalsContainers.value.push(l),n.onBeforeUnmount(()=>{o.modalsContainers.value=o.modalsContainers.value.filter(c=>c!==l)}),(c,u)=>n.unref(d)?(n.openBlock(!0),n.createElementBlock(n.Fragment,{key:0},n.renderList(n.unref(s),(f,h)=>(n.openBlock(),n.createBlock(n.resolveDynamicComponent(f.component),n.mergeProps({key:f.id},f.attrs,{modelValue:f.modelValue,"onUpdate:modelValue":p=>f.modelValue=p,onClosed:p=>i(()=>{var m,C;return(C=(m=n.unref(t)).resolvedClosed)==null?void 0:C.call(m,h)}),onOpened:()=>{var p,m;return(m=(p=n.unref(t)).resolvedOpened)==null?void 0:m.call(p,h)}}),n.createSlots({_:2},[n.renderList(f.slots,(p,m)=>({name:m,fn:n.withCtx(()=>[n.unref(k.isString)(p)?(n.openBlock(),n.createElementBlock("div",{key:0,innerHTML:p},null,8,ze)):"component"in p?(n.openBlock(),n.createBlock(n.resolveDynamicComponent(p.component),n.normalizeProps(n.mergeProps({key:1},p.attrs)),null,16)):(n.openBlock(),n.createBlock(n.resolveDynamicComponent(p),{key:2}))])}))]),1040,["modelValue","onUpdate:modelValue","onClosed","onOpened"]))),128)):n.createCommentVNode("",!0)}});function Ye(){const e=n.shallowReactive([]),o=n.shallowReactive([]),t=n.shallowReactive([]),l=n.ref([]),d=n.markRaw({install(s){s.provide(W,d),s.config.globalProperties.$vfm=d;const r=$e(d);s.provide(X,r)},modals:e,openedModals:o,dynamicModals:t,modalsContainers:l,get(s){return e.find(r=>r.value.modalId&&s===r.value.modalId)},toggle(s,r){const i=d.get(s);return i==null?void 0:i.value.toggle(r)},open(s){return d.toggle(s,!0)},close(s){return d.toggle(s,!1)},closeAll(){return Promise.allSettled([o.map(s=>s.value.toggle(!1))])}});return d}function $e(e){const{modals:o,openedModals:t,dynamicModals:l}=e,d={deleteFromModals(s){const r=o.findIndex(i=>i.value===s.value);r!==-1&&o.splice(r,1)},moveToLastOpenedModals(s){d.deleteFromOpenedModals(s),t.push(s)},deleteFromOpenedModals(s){const r=t.findIndex(i=>i.value===s.value);r!==-1&&t.splice(r,1)},async openLastOverlay(){var s;if(await n.nextTick(),t.forEach(r=>r.value.overlayVisible.value=!1),t.length>0){const r=t[t.length-1];!((s=r.value.hideOverlay)!=null&&s.value)&&(r.value.overlayVisible.value=!0)}},resolvedClosed(s){var r,i;(i=(r=l[s])==null?void 0:r.resolveClosed)==null||i.call(r)},resolvedOpened(s){var r,i;(i=(r=l[s])==null?void 0:r.resolveOpened)==null||i.call(r)}};return d}M.CoreModal=ee,M.ModalsContainer=Ue,M.VueFinalModal=oe,M.coreModalProps=A,M.createVfm=Ye,M.useModal=Re,M.useModalSlot=Fe,M.useVfm=q,M.useVfmAttrs=re,M.vueFinalModalProps=ne,Object.defineProperty(M,Symbol.toStringTag,{value:"Module"})});
